# Project_Test Mini基准（性能）测试框架 
一个在指定包下自动寻找需要性能测试的方法，进行测试、输出性能报表的性能测试框架，不断完善中……

# 背景
JMH，即Java Microbenchmark Harness，是专门用于代码微基准测试的工具套件。
OpenJDK 自身也大量地使用 JMH 进行性能对比，如果你是做 Java API 级别的性能对比，JMH 往往是你的首选。
- Micro Benchmark：简单的来说就是基于方法层面的基准测试，精度可以达到微秒级。当你定位到热点方法，
希望进一步优化方法性能的时候，就可以使用JMH对优化的结果进行量化的分析。

- 作用：性能往往是特定情景下的评价，泛泛地说性能“好”或者“快”，往是具有误导性的。
通过引入基准测试，我们可以定义性能对比的明确条件、具体的指标，进而保证得到定量的、可重复的对比数据，这是工程中的实际需要。

- 预热：Warmup 是指在实际进行 benchmark 前先进行预热的行为。
- 为什么需要预热？
因为 JVM 的 JIT 机制的存在，如果某个函数被调用多次之后，JVM 会尝试将其编译成为机器码从而提高执行速度。
为了让 benchmark 的结果更加接近真实情况就需要进行预热。

- JIT机制(just in time):即时编译编译器，能够加速 Java 程序的执行速度。通常通过 javac 将java代码编译，转换成 java 字节码，
JVM将字节码将其翻译成机器指令，逐条读入，逐条解释翻译。很显然，经过解释执行，其执行速度必然会比可执行的二进制字节码程序慢很多。
为了提高执行速度，引入了JIT，它会在运行时把翻译过的机器码保存起来，以备下次使用。

** 所以说对JVM加载机制来讲预热是很有必要的！**

# 实现
功能：用于对两个功能相似的代码块进行质量评测并输出性能测试结果（每运行一组的时间、平均时间、方差）。 
1. 使用者使用@Performance注解来设置测试参数（类和方法上），用@WarmUp传入预热参数，用@MarkMethod对需 要测试的方法进行标注，
2. 最后让待测试类实现Case接口，传入测试报告保存路径，调用主方法启动测试。 

# 技术
反射、注解 

# 实现 
1. CaseClassLoader寻找指定包下的待测试方法，将类的Class对象反射的实例化对象存到ArrayList中。        
2.在类中寻找被@MarkMethod注解了的方法，调用runcase方法。        
3. runcase方法先对每一组测试进行预热处理，在开始执行测试、计算，最后输出性能测试结果。 

# 亮点
自动识别包下需要进行性能测试的类和方法。 

# 测试
1. 需求分析：确定框架所要实现的功能，得到测试需求。       
2. 编写测试计划，使用边界值法对注解参数编写测试用例，使用场景法、错误推测法对自动寻找标记注解方法的功能编写 测试用例，基于需求分析法对其余功能进行测试用例编写。       
3. 单元测试中，对自动查找包下被注解的方法的接口、注解参数获取等进行测试。       
4. 开始测试用例的执行。  
（测试用例在github项目中的文件夹中）

